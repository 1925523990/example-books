<% render "_head.html" %>
<div class="alert alert-info">
    <p>In order to use this application you will need to create a free account and api key with <a href="http://isbndb.com/account/logincreate">ISBNdb</a></p>
    <p>Once you have done this you need to add your api key to the property <code>other.isbndb.apikey</code> in the <code>ratpack.properties</code> file and restart the application</p>
</div>
<% if (model.username) { %>
<p class="navbar-text navbar-right"><span class="glyphicon glyphicon-user"></span> Signed in as, <strong>$model.username</strong></p>
<% } else { %>
<ul class="nav nav-pills pull-right">
    <li><a href="/login">Sign in</a></li>
</ul>
<% } %>

<h1>Books</h1>
<nav class="navbar navbar-default">
    <ul class="nav navbar-nav nav-pills">
        <li><a href="/create">Create Book</a></li>
        <li <% if (!model.username) { %>class="disabled" <% } %>><a href="/admin/metrics">Metrics Dashboard</a></li>
        <li <% if (!model.username) { %>class="disabled" <% } %>><a href="/admin/health-check">Run Health Checks</a></li>
    </ul>
</nav>
<table class="table table-striped table-bordered">
    <thead>
    <tr>
        <th>ISBN</th>
        <th>Title</th>
        <th>Author</th>
        <th>Publisher</th>
        <th>Quantity</th>
        <th>Price</th>
    </tr>
    </thead>
    <tbody>
    <% model.books.each { book -> %>
    <tr>
        <td>$book.isbn</td>
        <td>$book.title</td>
        <td>$book.author</td>
        <td>$book.publisher</td>
        <td>$book.quantity</td>
        <td>$book.price</td>
        <td>
            <form action="/delete/$book.isbn" method="post" style="display: inline">
                <input type="submit" name="delete" value="Delete" class="btn btn-danger "/>
            </form>
            <a href="/update/$book.isbn" class="btn btn-default">Update</a>
        </td>
    </tr>
    <% } %>
    </tbody>
</table>
<% render "_footer.html" %>